<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>OMAN SERVERS</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
body { font-family: 'Press Start 2P', cursive; margin:0; background:black; color:#00ff00; text-align:center; }
main { margin-top:50px; max-width:900px; margin-left:auto; margin-right:auto; }
.server { background: rgba(0,0,0,0.85); border:2px solid #00ff00; padding:10px; margin:10px auto; border-radius:8px; width:300px; }
.server img { width:100px; height:100px; object-fit:cover; margin-bottom:5px; }
.copy-btn { margin-top:5px; cursor:pointer; }
.status-online { color:blue; font-weight:bold; }
.status-offline { color:red; font-weight:bold; }
</style>
</head>
<body>

<header>
<h1>OMAN SERVERS by Alhadhrami</h1>
<p>Press <b>Ctrl + A</b> to open Admin Panel</p>
</header>

<main>
<input type="text" id="searchInput" placeholder="Search servers by name..." style="margin-bottom:20px; padding:8px; width:60%; background:black; color:#00ff00; border:1px solid #00ff00;">
<div id="serverList"></div>
</main>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script>
const firebaseConfig = {
  apiKey: "AIzaSyD_LtDCU_fI1LazKYuuFBHf4tC_pzHAiCw",
  authDomain: "omanwebsite-ae60c.firebaseapp.com",
  projectId: "omanwebsite-ae60c",
  storageBucket: "omanwebsite-ae60c.firebasestorage.app",
  messagingSenderId: "554330436845",
  appId: "1:554330436845:web:5e9e90857410848ee488e4"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

const searchInput = document.getElementById('searchInput');
const serverList = document.getElementById('serverList');

function renderServers(filter=""){
    db.collection('servers').get().then(snapshot=>{
        serverList.innerHTML="";
        snapshot.forEach(doc=>{
            const s = doc.data();
            if(!s.name.toLowerCase().includes(filter.toLowerCase())) return;
            const div = document.createElement('div');
            div.className='server';
            const statusClass = s.status==='Online' ? 'status-online':'status-offline';
            div.innerHTML=`
                <h3>${s.name}</h3>
                <div class="${statusClass}">${s.status}</div>
                <img src="${s.img}">
                <p>${s.addr}${s.port?':'+s.port:''}</p>
                <p>${s.verType} - ${s.version}</p>
                <p>${s.desc}</p>
                <button class="copy-btn" onclick="copyAddr('${s.addr}','${s.port}')">Copy Address</button>
            `;
            serverList.appendChild(div);
        });
    });
}

function copyAddr(addr,port){navigator.clipboard.writeText(addr+(port?':'+port:'')); alert('Address copied');}
searchInput.addEventListener('input',()=>renderServers(searchInput.value));
renderServers();

// Admin shortcut
document.addEventListener('keydown', e=>{
    if(e.ctrlKey && e.key.toLowerCase()=='a'){window.location.href='admin.html';}
});
</script>

</body>
</html>
