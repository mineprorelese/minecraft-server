<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Add Server - OMAN SERVERS</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
body{font-family:'Press Start 2P',cursive;margin:0;background:black;color:#00ff00;text-align:center;}
main{padding:20px;max-width:600px;margin:auto;}
input,select,textarea,button{font-family:'Press Start 2P',cursive;margin:5px 0;padding:8px;border-radius:5px;border:1px solid #00ff00;background:black;color:#00ff00;display:block;width:80%;margin-left:auto;margin-right:auto;}
button{cursor:pointer;background:#00ff00;color:black;font-weight:bold;}
button:hover{opacity:0.8;}
</style>
</head>
<body>

<main>
<h2>Add New Server</h2>

<label>Server Name</label>
<input type="text" id="name" placeholder="Enter server name">

<label>Address</label>
<input type="text" id="addr" placeholder="Enter server address">

<label>Port</label>
<input type="text" id="port" placeholder="Optional port">

<label>Type</label>
<select id="verType">
<option value="">Select type</option>
<option value="Java">Java</option>
<option value="Bedrock">Bedrock</option>
</select>

<label>Status</label>
<select id="status">
<option value="Online">Online</option>
<option value="Offline">Offline</option>
</select>

<label>Version</label>
<input type="text" id="version" placeholder="Server version">

<label>Description</label>
<textarea id="desc" placeholder="Enter server description"></textarea>

<label>Server Picture</label>
<input type="file" id="imgFile" accept="image/*">

<button onclick="addServer()">Add Server</button>
</main>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script>
const firebaseConfig = {
  apiKey: "AIzaSyD_LtDCU_fI1LazKYuuFBHf4tC_pzHAiCw",
  authDomain: "omanwebsite-ae60c.firebaseapp.com",
  projectId: "omanwebsite-ae60c",
  storageBucket: "omanwebsite-ae60c.appspot.com",
  messagingSenderId: "554330436845",
  appId: "1:554330436845:web:5e9e90857410848ee488e4"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

// Password protection
const password="0021";
if(prompt("Enter admin password:")!==password){document.body.innerHTML="<h2 style='color:red;margin-top:50px;'>Access Denied</h2>";}

function addServer(){
    const name=document.getElementById('name').value;
    const addr=document.getElementById('addr').value;
    const port=document.getElementById('port').value;
    const verType=document.getElementById('verType').value;
    const status=document.getElementById('status').value;
    const version=document.getElementById('version').value;
    const desc=document.getElementById('desc').value;
    const fileInput=document.getElementById('imgFile');
    if(!name||!addr||!verType||!status||!version||!desc||fileInput.files.length===0){alert('Please fill all fields and choose an image');return;}
    
    const reader=new FileReader();
    reader.onload=function(e){
        const imgData=e.target.result;
        db.collection('servers').add({name, addr, port, verType, status, version, desc, img:imgData})
        .then(()=>{alert('Server added!'); 
            document.getElementById('name').value='';
            document.getElementById('addr').value='';
            document.getElementById('port').value='';
            document.getElementById('verType').value='';
            document.getElementById('status').value='Online';
            document.getElementById('version').value='';
            document.getElementById('desc').value='';
            document.getElementById('imgFile').value='';
        });
    };
    reader.readAsDataURL(fileInput.files[0]);
}
</script>
</body>
</html>
