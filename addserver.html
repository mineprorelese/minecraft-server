<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Add Server - MineServer Network</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
body { font-family: 'Press Start 2P', cursive; background:black; color:#00ff00; text-align:center; }
input, select, textarea, button {
    background:black; color:#00ff00; border:1px solid #00ff00;
    border-radius:5px; margin:6px auto; padding:8px; display:block; width:60%;
}
button { background:#00ff00; color:black; cursor:pointer; font-weight:bold; }
button:hover { opacity:0.8; }
</style>
</head>
<body>

<h2>Add New Server</h2>

<div id="content" style="display:none;">
    <label>Server Name</label><input id="name" placeholder="Enter name">
    <label>Address</label><input id="addr" placeholder="Enter address">
    <label>Port</label><input id="port" placeholder="Optional port">
    <label>Type</label>
    <select id="verType"><option>Java</option><option>Bedrock</option></select>
    <label>Status</label>
    <select id="status"><option>Online</option><option>Offline</option></select>
    <label>Version</label><input id="version" placeholder="Server version">
    <label>Description</label><textarea id="desc" placeholder="Description"></textarea>
    <label>Server Image</label><input type="file" id="img" accept="image/*">
    <button onclick="addServer()">Add Server</button>
</div>

<script>
const API_URL = "https://api.npoint.io/92f9eb9cee57ecd2ba23";
const password = "0021";
if (prompt("Enter admin password:") !== password) {
  document.body.innerHTML = "<h2 style='color:red;margin-top:50px;'>Access Denied</h2>";
} else {
  document.getElementById("content").style.display = "block";
}

let servers = [];
async function loadServers(){ const r=await fetch(API_URL); servers=await r.json(); }
async function saveServers(){ await fetch(API_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(servers)}); }

async function addServer(){
  await loadServers();
  const name=nameInput.value, addr=addrInput.value, port=portInput.value,
        verType=verTypeInput.value, status=statusInput.value,
        version=versionInput.value, desc=descInput.value, file=imgInput.files[0];
  if(!name||!addr||!verType||!status||!version||!desc||!file){alert("Please fill all fields");return;}
  const reader=new FileReader();
  reader.onload=async e=>{
    servers.push({name,addr,port,verType,status,version,desc,img:e.target.result});
    await saveServers(); alert("Server Added!");
    document.querySelectorAll("input,textarea,select").forEach(el=>el.value="");
  };
  reader.readAsDataURL(file);
}
const nameInput=document.getElementById("name");
const addrInput=document.getElementById("addr");
const portInput=document.getElementById("port");
const verTypeInput=document.getElementById("verType");
const statusInput=document.getElementById("status");
const versionInput=document.getElementById("version");
const descInput=document.getElementById("desc");
const imgInput=document.getElementById("img");
</script>

</body>
</html>
