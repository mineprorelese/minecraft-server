<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Add Server (Hidden)</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
body {
  font-family: 'Press Start 2P', cursive;
  background: radial-gradient(circle, #000 0%, #010a00 100%);
  color: #00ff00;
  text-align: center;
  margin: 0;
}
main { margin-top: 40px; }
input, textarea, select, button {
  display: block;
  margin: 10px auto;
  width: 60%;
  padding: 10px;
  border: 1px solid #00ff00;
  background: black;
  color: #00ff00;
  border-radius: 5px;
  font-size: 10px;
}
button {
  background: #00ff00;
  color: black;
  cursor: pointer;
  font-weight: bold;
}
button:hover { box-shadow: 0 0 10px #00ff00; }
</style>
</head>
<body>
<main>
  <h2>Add New Server</h2>
  <form id="serverForm">
    <input type="password" id="pass" placeholder="Enter Password" required>
    <input type="text" id="name" placeholder="Server Name" required>
    <input type="file" id="img" accept="image/*">
    <input type="text" id="addr" placeholder="Server Address" required>
    <input type="text" id="port" placeholder="Port (Optional)">
    <select id="verType" required>
      <option value="">Select Version Type</option>
      <option value="Java">Java</option>
      <option value="Bedrock">Bedrock</option>
    </select>
    <select id="status">
      <option value="Online">Online</option>
      <option value="Offline">Offline</option>
    </select>
    <input type="text" id="version" placeholder="Version (e.g. 1.20.1)">
    <textarea id="desc" placeholder="Server Description"></textarea>
    <button type="submit">Add Server</button>
  </form>
</main>

<script>
const API_URL = "https://api.npoint.io/92f9eb9cee57ecd2ba23";
const PASSWORD = "0021";

document.getElementById('serverForm').addEventListener('submit', async e => {
  e.preventDefault();
  if (document.getElementById('pass').value !== PASSWORD) {
    alert("Wrong password!");
    return;
  }
  const res = await fetch(API_URL);
  const servers = await res.json();

  const file = document.getElementById('img').files[0];
  let imgData = '';
  if (file) {
    const reader = new FileReader();
    reader.onload = async () => {
      imgData = reader.result;
      servers.push({
        name: document.getElementById('name').value,
        img: imgData,
        addr: document.getElementById('addr').value,
        port: document.getElementById('port').value,
        verType: document.getElementById('verType').value,
        version: document.getElementById('version').value,
        desc: document.getElementById('desc').value,
        status: document.getElementById('status').value
      });
      await fetch(API_URL, {
        method: "PUT",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(servers)
      });
      alert("Server added!");
      e.target.reset();
    };
    reader.readAsDataURL(file);
  }
});
</script>
</body>
</html>
