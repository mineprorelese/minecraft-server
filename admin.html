<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Panel - MineServer Network</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
body {
    font-family: 'Press Start 2P', cursive;
    margin: 0;
    background: black;
    color: #00ff00;
    overflow-x: hidden;
}
canvas#matrix {
    position: fixed;
    top:0; left:0; z-index:-1;
}
header {
    background-color: #111;
    border-bottom: 2px solid #00ff00;
    padding: 20px 0;
    text-align: center;
}
header h1 {
    font-size: 22px;
    margin: 0;
    text-shadow: 0 0 5px #00ff00;
    animation: glitch 2s infinite;
}
@keyframes glitch {
    0%{text-shadow:0 0 5px #00ff00;}
    20%{text-shadow:2px 0 #ff00ff;}
    40%{text-shadow:-2px 0 #0ff;}
    60%{text-shadow:2px 2px #ff00ff;}
    80%{text-shadow:-2px -2px #0ff;}
    100%{text-shadow:0 0 5px #00ff00;}
}
main { padding: 20px; max-width: 1200px; margin: auto; }
.search-box input {
    width: 300px; padding:8px; border:2px solid #00ff00; border-radius:5px;
    background:black; color:#00ff00; font-family:'Press Start 2P', cursive; margin-bottom:15px;
    display:block; margin-left:auto; margin-right:auto;
}
button {
    padding:8px 12px; border:none; border-radius:5px; cursor:pointer;
    background:#00ff00; color:black; font-weight:bold; transition:0.3s;
}
button:hover { box-shadow:0 0 15px #00ff00; }
.add-server, .server-list, .stats, .admin-actions, .admin-message, .activity-log, .quick-links, .theme-toggle {
    border:2px solid #00ff00; border-radius:8px; margin:20px auto; padding:15px; width:95%; max-width:600px; text-align:left;
}
.server-list { display:flex; flex-wrap:wrap; gap:15px; justify-content:center; }
.server {
    background: rgba(0,0,0,0.85); border:2px solid #00ff00; padding:10px; width:250px;
    border-radius:10px; transition:0.3s; cursor:pointer; position:relative;
}
.server:hover { box-shadow:0 0 15px #00ff00; }
.server img { width:100px; height:100px; object-fit:cover; border-radius:5px; display:block; margin:auto; }
.server input, .server select, .server textarea { width:90%; margin:3px 0; padding:5px; border:1px solid #00ff00; border-radius:5px; background:black; color:#00ff00; font-family:'Press Start 2P', cursive; font-size:12px;}
.toast-container { position: fixed; bottom:20px; right:20px; display:flex; flex-direction:column; gap:5px; z-index:9999;}
.toast { background:#00ff00; color:black; padding:10px 15px; border-radius:5px; opacity:0.9; animation: fadeOut 3s forwards;}
@keyframes fadeOut {0%{opacity:0.9;} 80%{opacity:0.9;} 100%{opacity:0;}}
.server-status { width:12px; height:12px; border-radius:50%; display:inline-block; margin-right:5px; animation:pulse 2s infinite; }
.server-status.online { background:#0f0; }
.server-status.offline { background:#f00; }
@keyframes pulse {0%{transform:scale(1);}50%{transform:scale(1.4);}100%{transform:scale(1);}}
.collapsed .server-details { display:none; }
.collapsed { height:50px; overflow:hidden;}
.activity-log { max-height:150px; overflow-y:auto; background:black;}
.quick-links button { margin:3px 2px; }
body.green-theme { color:#00ff00; }
body.green-theme header { border-color:#00ff00; }
body.green-theme .server { border-color:#00ff00; }
body.green-theme button { background:#00ff00; color:black; box-shadow:0 0 10px #00ff00; }
body.purple-theme { color:#ff00ff; }
body.purple-theme header { border-color:#ff00ff; }
body.purple-theme .server { border-color:#ff00ff; }
body.purple-theme button { background:#ff00ff; color:black; box-shadow:0 0 10px #ff00ff; }
body.cyberpunk-theme { color:#0ff; }
body.cyberpunk-theme header { border-color:#f0f; }
body.cyberpunk-theme .server { border-color:#f0f; }
body.cyberpunk-theme button { background:#f0f; color:#0ff; box-shadow:0 0 10px #f0f; }
</style>
</head>
<body>

<canvas id="matrix"></canvas>

<header><h1>Admin Panel</h1></header>

<main>
<!-- Search Box (Centered) -->
<div class="search-box">
  <input type="text" id="searchInput" placeholder="Search servers by name...">
</div>

<!-- Theme Toggle -->
<div class="theme-toggle">
<h3>Theme</h3>
<button onclick="setTheme('green')">Green</button>
<button onclick="setTheme('purple')">Neon Purple</button>
<button onclick="setTheme('cyberpunk')">Cyberpunk</button>
</div>

<!-- Add Server Form (Fixed black background for inputs) -->
<div class="add-server">
<h3 style="text-align:center; color:#00ff00; margin-bottom:15px;">Add New Server</h3>

<label style="color:#00ff00;">Server Name</label>
<input type="text" id="newName" placeholder="Enter server name" style="background:black; color:#00ff00; border:2px solid #00ff00; padding:10px; border-radius:6px; width:100%; margin-bottom:10px;">

<label style="color:#00ff00;">Address</label>
<input type="text" id="newAddr" placeholder="Enter server address" style="background:black; color:#00ff00; border:2px solid #00ff00; padding:10px; border-radius:6px; width:100%; margin-bottom:10px;">

<label style="color:#00ff00;">Port</label>
<input type="text" id="newPort" placeholder="Optional port" style="background:black; color:#00ff00; border:2px solid #00ff00; padding:10px; border-radius:6px; width:100%; margin-bottom:10px;">

<div style="display:flex; gap:10px; margin-bottom:10px;">
  <div style="flex:1;">
    <label style="color:#00ff00;">Type</label>
    <select id="newVerType" style="background:black; color:#00ff00; border:2px solid #00ff00; padding:8px; border-radius:6px; width:100%;">
      <option value="">Select type</option>
      <option value="Java">Java</option>
      <option value="Bedrock">Bedrock</option>
    </select>
  </div>
  <div style="flex:1;">
    <label style="color:#00ff00;">Status</label>
    <select id="newStatus" style="background:black; color:#00ff00; border:2px solid #00ff00; padding:8px; border-radius:6px; width:100%;">
      <option value="Online">Online</option>
      <option value="Offline">Offline</option>
    </select>
  </div>
</div>

<label style="color:#00ff00;">Version</label>
<input type="text" id="newVersion" placeholder="Server version" style="background:black; color:#00ff00; border:2px solid #00ff00; padding:10px; border-radius:6px; width:100%; margin-bottom:10px;">

<label style="color:#00ff00;">Description</label>
<textarea id="newDesc" placeholder="Enter server description" style="background:black; color:#00ff00; border:2px solid #00ff00; padding:10px; border-radius:6px; width:100%; height:80px; margin-bottom:10px;"></textarea>

<label style="color:#00ff00;">Image URL</label>
<input type="text" id="newImg" placeholder="Enter image URL" style="background:black; color:#00ff00; border:2px solid #00ff00; padding:10px; border-radius:6px; width:100%; margin-bottom:15px;">

<button onclick="addServer()">Add Server</button>
</div>

<!-- Server List -->
<div class="server-list" id="server-list"></div>

<!-- Statistics -->
<div class="stats" id="stats"></div>

<!-- Quick Links -->
<div class="quick-links">
<h3>Quick Links</h3>
<button onclick="openPage('editserver.html')">Edit Server</button>
<button onclick="openPage('removeserver.html')">Remove Server</button>
<button onclick="openPage('setstatus.html')">Set Status</button>
</div>

<!-- Admin Notes -->
<div class="admin-message">
<h3>Pinned Announcements</h3>
<textarea id="adminNotes" placeholder="Write admin notes..." style="width:100%; height:150px; background:black; color:#00ff00; font-family:'Press Start 2P', cursive; font-size:14px; padding:10px; border:2px solid #00ff00; border-radius:8px;"></textarea>
<button onclick="saveNotes()">Save Notes</button>
</div>

<!-- Activity Log -->
<div class="activity-log" id="activityLog"><h3>Activity Log</h3></div>

<!-- Toast container -->
<div class="toast-container" id="toastContainer"></div>

<script>
// Admin password
const password="0021";
if(prompt("Enter admin password:")!==password){document.body.innerHTML="<h2 style='color:red;margin-top:50px;'>Access Denied</h2>";}

// Data
let servers = JSON.parse(localStorage.getItem('servers')||'[]');
const serverList=document.getElementById('server-list');
const searchInput=document.getElementById('searchInput');
const statsDiv=document.getElementById('stats');
const activityLog=document.getElementById('activityLog');
const toastContainer=document.getElementById('toastContainer');

// Matrix Background
const canvas=document.getElementById("matrix");
const ctx=canvas.getContext("2d");
canvas.width=window.innerWidth; canvas.height=window.innerHeight;
const letters="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@#$%^&*()*&^%";
const fontSize=16;
const columns=canvas.width/fontSize;
const drops=[];
for(let x=0;x<columns;x++) drops[x]=1;
function drawMatrix(){
    ctx.fillStyle="rgba(0,0,0,0.05)";
    ctx.fillRect(0,0,canvas.width,canvas.height);
    ctx.fillStyle="#0f0"; ctx.font=fontSize+"px monospace";
    for(let i=0;i<drops.length;i++){
        const text=letters.charAt(Math.floor(Math.random()*letters.length));
        ctx.fillText(text,i*fontSize,drops[i]*fontSize);
        if(drops[i]*fontSize>canvas.height && Math.random()>0.975) drops[i]=0;
        drops[i]++;
    }
}
setInterval(drawMatrix,50);

// Toast
function toast(msg){const div=document.createElement('div');div.className='toast';div.textContent=msg;toastContainer.appendChild(div);setTimeout(()=>div.remove(),3000);}

// Activity log
function logActivity(msg){
    const time=new Date().toLocaleTimeString();
    const p=document.createElement('p'); p.textContent=`[${time}] ${msg}`;
    activityLog.appendChild(p);
}

// Admin notes
function saveNotes(){
    localStorage.setItem('adminNotes',document.getElementById('adminNotes').value);
    toast('Notes saved!');
}
document.getElementById('adminNotes').value=localStorage.getItem('adminNotes')||'';

// Theme
function setTheme(theme){
    document.body.className='';
    if(theme==='green') document.body.classList.add('green-theme');
    if(theme==='purple') document.body.classList.add('purple-theme');
    if(theme==='cyberpunk') document.body.classList.add('cyberpunk-theme');
    localStorage.setItem('adminTheme',theme);
}
const savedTheme=localStorage.getItem('adminTheme')||'green';
setTheme(savedTheme);

// Open hidden pages
function openPage(url){window.location.href=url;}

// Render servers
function renderServers(filter=''){
    serverList.innerHTML='';
    let online=0, offline=0, java=0, bedrock=0;
    servers.forEach((s,i)=>{
        if(!s.name.toLowerCase().includes(filter.toLowerCase())) return;
        const div=document.createElement('div');
        div.className='server';
        div.innerHTML=`
            <strong style="display:block;text-align:center;">${s.name}</strong>
            <div style="text-align:center;">
                <span class="server-status ${s.status.toLowerCase()}"></span>${s.status}
            </div>
            <img src="${s.img}" alt="${s.name}">
            <div class="server-details">
                <label>Address</label><input value="${s.addr}">
                <label>Port</label><input value="${s.port}">
                <label>Type</label>
                <select>
                    <option ${s.verType==='Java'?'selected':''}>Java</option>
                    <option ${s.verType==='Bedrock'?'selected':''}>Bedrock</option>
                </select>
                <label>Version</label><input value="${s.version}">
                <label>Description</label><textarea>${s.desc}</textarea>
                <label>Image URL</label><input value="${s.img}">
                <button onclick="saveServer(${i},this)">Save</button>
                <button onclick="removeServer(${i})">Remove</button>
                <button onclick="toggleStatus(${i})">Toggle Status</button>
                <button onclick="copyAddr(${i})">Copy Address</button>
            </div>
        `;
        serverList.appendChild(div);
        if(s.status==='Online') online++; else offline++;
        if(s.verType==='Java') java++; else if(s.verType==='Bedrock') bedrock++;
    });
    statsDiv.innerHTML=`Total: ${servers.length} | Online: ${online} | Offline: ${offline} | Java: ${java} | Bedrock: ${bedrock}`;
}

// Add server
function addServer(){
    const newS={
        name:document.getElementById('newName').value,
        addr:document.getElementById('newAddr').value,
        port:document.getElementById('newPort').value,
        verType:document.getElementById('newVerType').value,
        status:document.getElementById('newStatus').value,
        version:document.getElementById('newVersion').value,
        desc:document.getElementById('newDesc').value,
        img:document.getElementById('newImg').value
    };
    if(!newS.name || !newS.addr) { toast('Name and Address required'); return; }
    servers.push(newS); localStorage.setItem('servers',JSON.stringify(servers));
    renderServers(searchInput.value); logActivity(`Server "${newS.name}" added`);
    toast('Server added!');
    document.getElementById('newName').value='';
    document.getElementById('newAddr').value='';
    document.getElementById('newPort').value='';
    document.getElementById('newVerType').value='';
    document.getElementById('newStatus').value='Online';
    document.getElementById('newVersion').value='';
    document.getElementById('newDesc').value='';
    document.getElementById('newImg').value='';
}

// Save server
function saveServer(i,btn){
    const div=btn.parentElement;
    const inputs=div.querySelectorAll('input');
    const select=div.querySelector('select');
    const textarea=div.querySelector('textarea');
    servers[i].addr=inputs[0].value;
    servers[i].port=inputs[1].value;
    servers[i].verType=select.value;
    servers[i].version=inputs[2].value;
    servers[i].desc=textarea.value;
    servers[i].img=inputs[3].value;
    localStorage.setItem('servers',JSON.stringify(servers));
    renderServers(searchInput.value);
    logActivity(`Server "${servers[i].name}" saved`);
    toast('Server saved!');
}

// Remove server
function removeServer(i){
    if(!confirm('Remove server '+servers[i].name+'?')) return;
    logActivity(`Server "${servers[i].name}" removed`);
    servers.splice(i,1);
    localStorage.setItem('servers',JSON.stringify(servers));
    renderServers(searchInput.value);
    toast('Server removed!');
}

// Toggle Status
function toggleStatus(i){
    servers[i].status=(servers[i].status==='Online')?'Offline':'Online';
    localStorage.setItem('servers',JSON.stringify(servers));
    renderServers(searchInput.value);
    logActivity(`Server "${servers[i].name}" status toggled to ${servers[i].status}`);
    toast(`Server "${servers[i].name}" is now ${servers[i].status}`);
}

// Copy Address
function copyAddr(i){
    navigator.clipboard.writeText(servers[i].addr+(servers[i].port? ':'+servers[i].port:''));
    toast('Address copied!');
}

// Search
searchInput.addEventListener('input',()=>renderServers(searchInput.value));

// Initial render
renderServers();
</script>

</main>
</body>
</html>
