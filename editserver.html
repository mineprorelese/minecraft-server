<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Edit Server (Hidden)</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
body { font-family: 'Press Start 2P', cursive; margin:0; background:black; color:#00ffff; text-align:center; }
main { margin-top:50px; }
input, textarea, select, button { display:block; margin:10px auto; padding:10px; width:60%; border-radius:5px; background:black; color:#00ffff; border:1px solid #00ffff; }
button:hover{ opacity:0.8; cursor:pointer; }
.server-item { border:1px solid #00ffff; padding:10px; margin:5px; }
</style>
</head>
<body>
<main>
<h2>Edit Server</h2>
<input type="password" id="pass" placeholder="Enter admin password" required>
<div id="serverList"></div>
</main>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script>
const firebaseConfig = {
  apiKey: "AIzaSyD_LtDCU_fI1LazKYuuFBHf4tC_pzHAiCw",
  authDomain: "omanwebsite-ae60c.firebaseapp.com",
  projectId: "omanwebsite-ae60c",
  storageBucket: "omanwebsite-ae60c.firebasestorage.app",
  messagingSenderId: "554330436845",
  appId: "1:554330436845:web:5e9e90857410848ee488e4"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();
const password="0021";

function renderServers(){
    db.collection('servers').get().then(snapshot=>{
        const container=document.getElementById('serverList');
        container.innerHTML="";
        snapshot.forEach(doc=>{
            const data=doc.data();
            const div=document.createElement('div');
            div.className='server-item';
            div.innerHTML=`
                <strong>${data.name}</strong><br>
                <input value="${data.addr}" id="addr_${doc.id}">
                <input value="${data.port}" id="port_${doc.id}">
                <select id="verType_${doc.id}">
                    <option ${data.verType==='Java'?'selected':''}>Java</option>
                    <option ${data.verType==='Bedrock'?'selected':''}>Bedrock</option>
                </select>
                <input value="${data.version}" id="version_${doc.id}">
                <textarea id="desc_${doc.id}">${data.desc}</textarea>
                <button onclick="saveServer('${doc.id}')">Save</button>
            `;
            container.appendChild(div);
        });
    });
}

function saveServer(id){
    if(document.getElementById('pass').value!==password){alert('Wrong password'); return;}
    const addr=document.getElementById('addr_'+id).value;
    const port=document.getElementById('port_'+id).value;
    const verType=document.getElementById('verType_'+id).value;
    const version=document.getElementById('version_'+id).value;
    const desc=document.getElementById('desc_'+id).value;
    db.collection('servers').doc(id).update({addr,port,verType,version,desc}).then(()=>alert('Server updated!'));
}

renderServers();
</script>
</body>
</html>
