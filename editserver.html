<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Edit Server - MineServer Network</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
body{ font-family:'Press Start 2P', cursive; background:#222 url('https://i.imgur.com/fZ0oZqP.png') repeat; background-size:64px; color:#fff; margin:0; }
header{ background:#2e7d32; padding:15px 20px; display:flex; justify-content:space-between; align-items:center; }
header h1{ font-size:20px; margin:0; }
nav a{ color:#fff; margin:0 10px; text-decoration:none; font-size:12px; }
nav a:hover{text-decoration:underline;}
main{ padding:20px; display:flex; flex-direction:column; align-items:center; min-height:80vh; }
h2{ font-size:16px; margin-bottom:20px; }
#server-list{ display:flex; flex-wrap:wrap; gap:20px; justify-content:center; width:100%; max-width:1200px; }
.server{ background:rgba(30,30,30,0.85); width:220px; padding:15px; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,0.5); cursor:pointer; transition:0.2s; text-align:center; }
.server:hover{ transform:translateY(-5px); box-shadow:0 8px 20px rgba(0,0,0,0.7); }
.server img{ width:100px; height:100px; object-fit:cover; border-radius:10px; margin-bottom:10px; }
form{ display:none; flex-direction:column; align-items:center; margin-top:20px; }
input,textarea,select,button{ margin:5px 0; padding:10px; width:60%; border:none; border-radius:5px; font-family:inherit; font-size:10px; }
button{ background:#2e7d32; color:#fff; cursor:pointer; }
button:hover{ background:#388e3c; }
img.preview{ max-width:150px; margin-top:10px; border-radius:8px; display:none; }
footer{ background:#111; color:#aaa; padding:10px; text-align:center; font-size:10px; margin-top:20px; width:100%; }
@media(max-width:600px){ .server{ width:90%; } input,textarea,select,button{ width:90%; } }
</style>
</head>
<body>

<header>
<h1>MineServer Network - Edit Server</h1>
<nav><a href="index.html">Home</a><a href="servers.html">Servers</a></nav>
</header>

<main>
<h2>Select a server to edit</h2>
<div id="server-list"></div>

<form id="editForm">
<h2>Edit Server</h2>
<input type="text" id="name" placeholder="Server Name" required>
<input type="file" id="imgFile" accept="image/*">
<img id="preview" class="preview">
<input type="text" id="addr" placeholder="Server Address" required>
<input type="text" id="port" placeholder="Port (Optional)">
<select id="verType" required>
<option value="">Select Version Type</option>
<option value="Java">Java</option>
<option value="Bedrock">Bedrock</option>
</select>
<input type="text" id="version" placeholder="Server Version" required>
<textarea id="desc" placeholder="Server Description" required></textarea>
<button type="submit">Save Changes</button>
</form>
</main>

<footer>Â© 2025 MineServer Network</footer>

<script>
const password="0021";
if(prompt("Enter password:")!==password){ alert("Access Denied"); document.body.innerHTML="<h2 style='color:red;margin-top:50px;'>Access Denied</h2>"; }

let servers=JSON.parse(localStorage.getItem('servers')||'[]');
const serverList=document.getElementById('server-list');
const editForm=document.getElementById('editForm');
const nameInput=document.getElementById('name');
const addrInput=document.getElementById('addr');
const portInput=document.getElementById('port');
const verTypeSelect=document.getElementById('verType');
const versionInput=document.getElementById('version');
const descInput=document.getElementById('desc');
const imgFile=document.getElementById('imgFile');
const preview=document.getElementById('preview');
let imgData='';
let editingIndex=null;

// Render servers
function renderServers(){
  serverList.innerHTML='';
  servers.forEach((s,i)=>{
    const div=document.createElement('div'); div.className='server';
    div.innerHTML=`<img src="${s.img}" alt="${s.name}"><h3>${s.name}</h3><p>${s.addr}${s.port?':'+s.port:''}</p>`;
    div.addEventListener('click',()=>selectServer(i));
    serverList.appendChild(div);
  });
}

// Select server
function selectServer(i){
  editingIndex=i;
  const s=servers[i];
  nameInput.value=s.name;
  addrInput.value=s.addr;
  portInput.value=s.port;
  verTypeSelect.value=s.verType;
  versionInput.value=s.version;
  descInput.value=s.desc;
  imgData=s.img;
  preview.src=imgData; preview.style.display='block';
  editForm.style.display='flex';
}

// Image preview
imgFile.addEventListener('change',e=>{
  const file=e.target.files[0]; if(!file) return;
  const reader=new FileReader();
  reader.onload=ev=>{ imgData=ev.target.result; preview.src=imgData; preview.style.display='block'; }
  reader.readAsDataURL(file);
});

// Save changes
editForm.addEventListener('submit',e=>{
  e.preventDefault();
  if(editingIndex===null) return;
  servers[editingIndex]={name:nameInput.value,img:imgData,addr:addrInput.value,port:portInput.value,verType:verTypeSelect.value,version:versionInput.value,desc:descInput.value};
  localStorage.setItem('servers',JSON.stringify(servers));
  alert('Server updated!');
  location.reload();
});

renderServers();
</script>
</body>
</html>
